<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Médico | UniHelp</title>
  <link rel="stylesheet" href="css/painel_user.css">
  <link rel="shortcut icon" href="ImagensUniHelp/UniHelp-ico.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Estilos específicos para o chat */
    .chat-container {
      display: flex;
      height: calc(100vh - 200px);
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      overflow: hidden;
      margin-top: 1.5rem;
    }

    .contacts-sidebar {
      width: 300px;
      border-right: 1px solid #eee;
      overflow-y: auto;
    }

    .chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    /* Lista de contatos */
    .contacts-header {
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }

    .search-bar {
      position: relative;
    }

    .search-bar i {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
    }

    .search-bar input {
      width: 100%;
      padding: 0.75rem 1rem 0.75rem 2.5rem;
      border: 1px solid #ddd;
      border-radius: 20px;
      font-size: 0.9rem;
    }

    .contact-card {
      display: flex;
      align-items: center;
      padding: 1rem;
      cursor: pointer;
      border-bottom: 1px solid #f5f5f5;
      transition: all 0.2s;
    }

    .contact-card:hover {
      background: #f8f9fa;
    }

    .contact-card.active {
      background: #e6f0ff;
    }

    .contact-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 1rem;
    }

    .contact-info {
      flex: 1;
    }

    .contact-name {
      font-weight: 500;
      margin-bottom: 0.2rem;
    }

    .contact-specialty {
      font-size: 0.8rem;
      color: #666;
    }

    .contact-status {
      font-size: 0.75rem;
      color: #999;
    }

    .status-online {
      color: var(--success);
    }

    .unread-badge {
      background: var(--primary);
      color: white;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      margin-left: 0.5rem;
    }

    /* Área de mensagens */
    .chat-header {
      padding: 1rem;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      background: #f8f9fa;
    }

    .chat-doctor-info {
      display: flex;
      align-items: center;
    }

    .chat-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 1rem;
    }

    .chat-doctor-name {
      font-weight: 500;
    }

    .chat-doctor-specialty {
      font-size: 0.8rem;
      color: #666;
    }

    .chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      background: #fafafa;
    }

    .message {
      margin-bottom: 1rem;
      max-width: 80%;
    }

    .message.received {
      margin-right: auto;
    }

    .message.sent {
      margin-left: auto;
    }

    .message-content {
      padding: 0.8rem 1rem;
      border-radius: 18px;
    }

    .message.received .message-content {
      background: white;
      border-top-left-radius: 0;
      box-shadow: 0 1px 2px rgba(0,0,0,0.1);
    }

    .message.sent .message-content {
      background: var(--primary);
      color: white;
      border-top-right-radius: 0;
    }

    .message-time {
      font-size: 0.7rem;
      color: #999;
      margin-top: 0.3rem;
      text-align: right;
    }

    .chat-input-area {
      padding: 1rem;
      border-top: 1px solid #eee;
      display: flex;
      background: white;
    }

    .message-input {
      flex: 1;
      padding: 0.8rem 1rem;
      border: 1px solid #ddd;
      border-radius: 20px;
      resize: none;
      min-height: 50px;
      max-height: 120px;
      font-family: inherit;
    }

    .send-btn {
      margin-left: 1rem;
      padding: 0 1.5rem;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .send-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .no-chat-selected {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      color: #999;
      text-align: center;
      padding: 2rem;
    }

    .no-chat-selected i {
      font-size: 3rem;
      margin-bottom: 1rem;
      color: #ddd;
    }

    /* Responsividade */
    @media (max-width: 768px) {
      .chat-container {
        flex-direction: column;
        height: auto;
      }
      
      .contacts-sidebar {
        width: 100%;
        height: 300px;
        border-right: none;
        border-bottom: 1px solid #eee;
      }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Padrão -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <img src="https://via.placeholder.com/40x40" alt="UniHelp Logo" class="brand-logo">
        <span class="brand-name">UniHelp</span>
      </div>
      
      <nav class="sidebar-menu">
        <div class="menu-title">Menu Principal</div>
        <a href="painel_user.html" class="menu-item">
          <i class="fas fa-home"></i>
          Home
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-calendar-check"></i>
          Agendar Consultas
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-users"></i>
          Rede de Apoio
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-wheelchair"></i>
          Equipamentos
        </a>

        <div class="menu-title">Recursos</div>
        <a href="#" class="menu-item">
          <i class="fas fa-file-medical"></i>
          Farmácia Solidária
        </a>
        <a href="notificacoes.html" class="menu-item">
          <i class="fas fa-bell"></i>
          Notificações
        </a>
        <a href="mensagens.html" class="menu-item active">
          <i class="fas fa-comments"></i>
          Mensagens
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-exclamation-triangle"></i>
          Suporte 
        </a>
        
        <div class="menu-title">Configurações</div>
        <a href="#" class="menu-item">
          <i class="fas fa-user-cog"></i>
          Perfil
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-cog"></i>
          Configurações
        </a>
        <a href="#" class="menu-item">
          <i class="fas fa-question-circle"></i>
          Quem Somos ?
        </a>
        
        <div class="sidebar-footer">
          <div class="upgrade-card">
            <div class="upgrade-title">Doar</div>
            <div class="upgrade-text">Doe equipamentos para ajudar pessoas !</div>
            <a href="#" class="upgrade-btn">Doar</a>
          </div>
        </div>
      </nav>
    </aside>
    
    <!-- Header Padrão -->
    <header class="header">
      <div class="header-left">
        <button class="menu-toggle" id="menuToggle">
          <i class="fas fa-bars"></i>
        </button>
        <div class="logo">
          <img id="logocabecalho" src="ImagensUniHelp/UniHelp Logo.png" alt="Ícone UniHelp"/>
        </div>
      </div>
      
      <nav class="nav-links">
        <a href="inicio.html">Início</a>
        <a href="novidades.html">Novidades</a>
        <a href="redessociais.html">Redes Sociais</a>
        <a href="ajuda.html">Central de Ajuda</a>
        <span id="horaData">00:00 | 00/00/0000</span>
        
        <div class="perfil-container">
          <a href="#">
            <img id="perfil" src="ImagensUniHelp/seu perfil.jpg" alt="Perfil" class="user-avatar" />
          </a>
        </div>
      </nav>
    </header>
    
    <!-- Conteúdo Principal -->
    <main class="main-content">
      <div class="page-header">
        <div class="page-title">
          <h1>Chat Médico</h1>
          <p>Converse diretamente com os profissionais de saúde</p>
        </div>
      </div>
      
      <div class="chat-container">
        <!-- Lista de Médicos -->
        <div class="contacts-sidebar">
          <div class="contacts-header">
            <div class="search-bar">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Buscar médicos...">
            </div>
          </div>
          
          <div class="contacts-list">
            <div class="contact-card active">
              <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Dr. André" class="contact-avatar">
              <div class="contact-info">
                <div class="contact-name">Dr. André Silva</div>
                <div class="contact-specialty">Cardiologista</div>
                <div class="contact-status status-online">
                  <i class="fas fa-circle"></i> Online
                </div>
              </div>
              <div class="unread-badge">2</div>
            </div>
            
            <div class="contact-card">
              <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Dra. Carla" class="contact-avatar">
              <div class="contact-info">
                <div class="contact-name">Dra. Carla Mendes</div>
                <div class="contact-specialty">Pediatra</div>
                <div class="contact-status status-online">
                  <i class="fas fa-circle"></i> Online
                </div>
              </div>
            </div>
            
            <div class="contact-card">
              <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Dra. Juliana" class="contact-avatar">
              <div class="contact-info">
                <div class="contact-name">Dra. Juliana Santos</div>
                <div class="contact-specialty">Dermatologista</div>
                <div class="contact-status">
                  <i class="fas fa-circle"></i> Offline
                </div>
              </div>
            </div>
            
            <div class="contact-card">
              <img src="https://randomuser.me/api/portraits/men/65.jpg" alt="Dr. Marcos" class="contact-avatar">
              <div class="contact-info">
                <div class="contact-name">Dr. Marcos Oliveira</div>
                <div class="contact-specialty">Ortopedista</div>
                <div class="contact-status">
                  <i class="fas fa-circle"></i> Offline
                </div>
              </div>
              <div class="unread-badge">1</div>
            </div>
          </div>
        </div>
        
        <!-- Área do Chat -->
        <div class="chat-area">
          <div class="chat-header">
            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Dr. André" class="chat-avatar">
            <div class="chat-doctor-info">
              <div class="chat-doctor-name">Dr. André Silva</div>
              <div class="chat-doctor-specialty">Cardiologista</div>
            </div>
          </div>
          
          <div class="chat-messages">
            <div class="message received">
              <div class="message-content">
                <div class="message-text">Bom dia, Maria. Como você está se sentindo hoje?</div>
                <div class="message-time">10:30</div>
              </div>
            </div>
            
            <div class="message sent">
              <div class="message-content">
                <div class="message-text">Bom dia, doutor. Estou melhor, mas ainda com um pouco de cansaço.</div>
                <div class="message-time">10:32</div>
              </div>
            </div>
            
            <div class="message received">
              <div class="message-content">
                <div class="message-text">Isso é normal após o procedimento. Você está tomando os medicamentos corretamente?</div>
                <div class="message-time">10:33</div>
              </div>
            </div>
            
            <div class="message sent">
              <div class="message-content">
                <div class="message-text">Sim, estou seguindo exatamente como o senhor prescreveu.</div>
                <div class="message-time">10:34</div>
              </div>
            </div>
            
            <div class="message received">
              <div class="message-content">
                <div class="message-text">Ótimo. Vamos marcar uma consulta de acompanhamento para semana que vem?</div>
                <div class="message-time">10:35</div>
              </div>
            </div>
          </div>
          
          <div class="chat-input-area">
            <textarea class="message-input" placeholder="Digite sua mensagem..." rows="1"></textarea>
            <button class="send-btn">
              <i class="fas fa-paper-plane"></i>
              Enviar
            </button>
          </div>
        </div>
      </div>
    </main>
    
    <!-- Footer Padrão -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-col">
          <img src="ImagensUniHelp/UniHelp Logo.png" alt="UniHelp Logo" class="footer-logo">
          <p class="footer-about">
            A UniHelp é uma plataforma completa de gestão de saúde e bem-estar, 
            conectando pacientes, familiares e profissionais em um ecossistema integrado.
          </p>
          <div class="footer-social">
            <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-link"><i class="fab fa-linkedin-in"></i></a>
          </div>
        </div>
        
        <div class="footer-col">
          <h4 class="footer-title">Serviços</h4>
          <ul class="footer-links">
            <li class="footer-link"><a href="#">Consultas Médicas</a></li>
            <li class="footer-link"><a href="#">Fisioterapia</a></li>
            <li class="footer-link"><a href="#">Equipamentos</a></li>
            <li class="footer-link"><a href="#">Apoio Social</a></li>
            <li class="footer-link"><a href="#">Emergências</a></li>
          </ul>
        </div>
        
        <div class="footer-col">
          <h4 class="footer-title">Empresa</h4>
          <ul class="footer-links">
            <li class="footer-link"><a href="#">Sobre Nós</a></li>
            <li class="footer-link"><a href="#">Equipe</a></li>
            <li class="footer-link"><a href="#">Parceiros</a></li>
            <li class="footer-link"><a href="#">Carreiras</a></li>
            <li class="footer-link"><a href="#">Blog</a></li>
          </ul>
        </div>
        
        <div class="footer-col">
          <h4 class="footer-title">Suporte</h4>
          <ul class="footer-links">
            <li class="footer-link"><a href="#">Central de Ajuda</a></li>
            <li class="footer-link"><a href="#">FAQ</a></li>
            <li class="footer-link"><a href="#">Privacidade</a></li>
            <li class="footer-link"><a href="#">Termos de Uso</a></li>
            <li class="footer-link"><a href="#">Contato</a></li>
          </ul>
          
          <div class="footer-newsletter">
            <input type="email" placeholder="Seu e-mail" class="newsletter-input">
            <button class="newsletter-btn">Assinar Newsletter</button>
          </div>
        </div>
        
        <div class="footer-bottom">
          <div class="footer-copyright">
            © 2025 UniHelp. Todos os direitos reservados.
          </div>
          <div class="footer-legal">
            <a href="#">Política de Privacidade</a>
            <a href="#">Termos de Serviço</a>
            <a href="#">Mapa do Site</a>
          </div>
        </div>
      </div>
    </footer>
  </div>

<!-- Mantenha TODO o código anterior EXATAMENTE como está -->
<!-- Apenas substitua a seção do script pelo seguinte código: -->

<script>
    // Dados dos médicos e possíveis respostas
    const doctorProfiles = {
        1: {
            id: 1,
            name: "Dr. André Silva",
            specialty: "Cardiologista",
            avatar: "men/32",
            responses: {
                greetings: [
                    "Olá Maria, como você está se sentindo hoje?",
                    "Bom dia Maria, como vai seu coração hoje?",
                    "Oi Maria, me conte como tem sido sua semana?"
                ],
                symptoms: [
                    "Esses sintomas são comuns após o procedimento. Está tomando os medicamentos corretamente?",
                    "Vamos analisar esses sintomas. Poderia descrever com mais detalhes?",
                    "Isso pode estar relacionado ao seu tratamento atual. Está seguindo todas as recomendações?"
                ],
                medications: [
                    "A dose que prescrevi está sendo eficaz? Tem sentido algum efeito colateral?",
                    "É importante tomar os remédios nos horários corretos. Como tem sido sua rotina?",
                    "Vamos monitorar a resposta aos medicamentos. Tem anotado alguma mudança?"
                ],
                appointments: [
                    "Acho que seria bom marcarmos uma consulta de acompanhamento. Que tal semana que vem?",
                    "Seus exames estão agendados? Precisamos avaliar seus progressos.",
                    "Podemos marcar uma teleconsulta para discutir esses sintomas com mais calma."
                ],
                general: [
                    "Entendi. Vamos acompanhar essa evolução.",
                    "Isso é importante para seu tratamento. Vamos monitorar.",
                    "Ótimo feedback. Isso me ajuda a ajustar seu tratamento."
                ]
            }
        },
        2: {
            id: 2,
            name: "Dra. Carla Mendes",
            specialty: "Pediatra",
            avatar: "women/44",
            responses: {
                greetings: [
                    "Olá, como está o pequeno hoje?",
                    "Bom dia, como estão os sintomas da criança?",
                    "Oi, me conte como tem sido o desenvolvimento?"
                ],
                symptoms: [
                    "Esses sintomas são normais nessa fase. A febre continua alta?",
                    "Está mantendo a hidratação adequada? Isso é fundamental.",
                    "Vamos observar por mais 24h. Se piorar, me avise imediatamente."
                ],
                medications: [
                    "A dose da medicação está sendo tolerada? Alguma reação?",
                    "Lembre-se de dar os remédios nos horários prescritos.",
                    "Podemos ajustar a medicação se os sintomas persistirem."
                ],
                development: [
                    "Isso faz parte do desenvolvimento normal. Alguma outra preocupação?",
                    "Vamos marcar uma consulta para avaliar esses marcos do desenvolvimento.",
                    "Continue estimulando como orientamos na última consulta."
                ],
                general: [
                    "Ótimo, vamos continuar monitorando.",
                    "Agradeço pelo feedback. Isso ajuda no acompanhamento.",
                    "Anotado. Vamos ver como evolui nos próximos dias."
                ]
            }
        }
    };

    // Variáveis globais
    let currentDoctorId = 1;
    let conversationHistory = {};

    // Inicialização do chat
    document.addEventListener('DOMContentLoaded', function() {
        // Toggle do menu
        document.getElementById('menuToggle').addEventListener('click', function() {
            document.getElementById('sidebar').classList.toggle('active');
        });
        
        // Atualiza data e hora
        updateDateTime();
        setInterval(updateDateTime, 60000);
        
        // Configuração dos cards de médicos
        setupDoctorCards();
        
        // Configuração do input de mensagem
        const textarea = document.querySelector('.message-input');
        const sendBtn = document.querySelector('.send-btn');
        
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            sendBtn.disabled = this.value.trim() === '';
        });
        
        sendBtn.addEventListener('click', sendMessage);
        
        textarea.addEventListener('keydown', function(e) {
            if(e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
    });

    function updateDateTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
        const dateString = now.toLocaleDateString('pt-BR');
        document.getElementById('horaData').textContent = `${timeString} | ${dateString}`;
    }

    function setupDoctorCards() {
        const doctorsList = [
            { id: 1, name: "Dr. André Silva", specialty: "Cardiologista", avatar: "men/32", online: true, unread: 2 },
            { id: 2, name: "Dra. Carla Mendes", specialty: "Pediatra", avatar: "women/44", online: true, unread: 0 }
        ];

        const contactsList = document.querySelector('.contacts-list');
        contactsList.innerHTML = '';

        doctorsList.forEach(doctor => {
            const doctorCard = document.createElement('div');
            doctorCard.className = 'contact-card';
            doctorCard.dataset.id = doctor.id;
            
            doctorCard.innerHTML = `
                <img src="https://randomuser.me/api/portraits/${doctor.avatar}.jpg" 
                     alt="${doctor.name}" class="contact-avatar">
                <div class="contact-info">
                    <div class="contact-name">${doctor.name}</div>
                    <div class="contact-specialty">${doctor.specialty}</div>
                    <div class="contact-status ${doctor.online ? 'status-online' : ''}">
                        <i class="fas fa-circle"></i> ${doctor.online ? 'Online' : 'Offline'}
                    </div>
                </div>
                ${doctor.unread > 0 ? `<div class="unread-badge">${doctor.unread}</div>` : ''}
            `;
            
            doctorCard.addEventListener('click', function() {
                document.querySelectorAll('.contact-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentDoctorId = doctor.id;
                loadDoctorProfile(currentDoctorId);
                
                if(!conversationHistory[currentDoctorId]) {
                    startNewConversation(currentDoctorId);
                } else {
                    loadConversation(currentDoctorId);
                }
            });
            
            contactsList.appendChild(doctorCard);
        });

        // Seleciona o primeiro médico por padrão
        const firstDoctorCard = contactsList.querySelector('.contact-card');
        if(firstDoctorCard) {
            firstDoctorCard.click();
        }
    }

    function loadDoctorProfile(doctorId) {
        const doctor = doctorProfiles[doctorId];
        if(!doctor) return;
        
        const chatHeader = document.querySelector('.chat-header');
        chatHeader.innerHTML = `
            <img src="https://randomuser.me/api/portraits/${doctor.avatar}.jpg" 
                 alt="${doctor.name}" class="chat-avatar">
            <div class="chat-doctor-info">
                <div class="chat-doctor-name">${doctor.name}</div>
                <div class="chat-doctor-specialty">${doctor.specialty}</div>
            </div>
        `;
    }

    function startNewConversation(doctorId) {
        const doctor = doctorProfiles[doctorId];
        if(!doctor) return;
        
        // Limpa mensagens anteriores
        const messagesContainer = document.querySelector('.chat-messages');
        messagesContainer.innerHTML = '';
        
        // Adiciona mensagem de saudação do médico
        const greeting = doctor.responses.greetings[
            Math.floor(Math.random() * doctor.responses.greetings.length)
        ];
        addMessage(greeting, 'received');
        
        // Inicializa histórico da conversa
        conversationHistory[doctorId] = [{
            sender: 'doctor',
            message: greeting,
            time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
        }];
    }

    function loadConversation(doctorId) {
        const messagesContainer = document.querySelector('.chat-messages');
        messagesContainer.innerHTML = '';
        
        if(conversationHistory[doctorId]) {
            conversationHistory[doctorId].forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.sender === 'doctor' ? 'received' : 'sent'}`;
                
                messageDiv.innerHTML = `
                    <div class="message-content">
                        <div class="message-text">${msg.message}</div>
                        <div class="message-time">${msg.time}</div>
                    </div>
                `;
                
                messagesContainer.appendChild(messageDiv);
            });
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
    }

    function sendMessage() {
        const textarea = document.querySelector('.message-input');
        const message = textarea.value.trim();
        
        if(message && currentDoctorId) {
            // Adiciona mensagem do usuário
            addMessage(message, 'sent');
            textarea.value = '';
            textarea.style.height = 'auto';
            document.querySelector('.send-btn').disabled = true;
            
            // Salva no histórico
            if(!conversationHistory[currentDoctorId]) {
                conversationHistory[currentDoctorId] = [];
            }
            
            conversationHistory[currentDoctorId].push({
                sender: 'user',
                message: message,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            
            // Resposta do médico
            setTimeout(() => {
                const doctor = doctorProfiles[currentDoctorId];
                if(!doctor) return;
                
                // Determina o tipo de resposta com base no conteúdo
                let responseType = 'general';
                const lowerMsg = message.toLowerCase();
                
                if(/(dor|sintoma|incômodo|desconforto)/.test(lowerMsg)) {
                    responseType = 'symptoms';
                } else if(/(remédio|medicação|comprimido|pílula|dose)/.test(lowerMsg)) {
                    responseType = 'medications';
                } else if(/(consulta|agendamento|exame|retorno)/.test(lowerMsg)) {
                    responseType = 'appointments';
                } else if(currentDoctorId === 2 && /(desenvolvimento|andar|falar|crescer)/.test(lowerMsg)) {
                    responseType = 'development';
                }
                
                // Seleciona resposta aleatória do tipo determinado
                const possibleResponses = doctor.responses[responseType] || doctor.responses.general;
                const response = possibleResponses[
                    Math.floor(Math.random() * possibleResponses.length)
                ];
                
                addMessage(response, 'received');
                
                // Atualiza histórico
                conversationHistory[currentDoctorId].push({
                    sender: 'doctor',
                    message: response,
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                });
            }, 1000 + Math.random() * 2000);
        }
    }

    function addMessage(text, type) {
        const messagesContainer = document.querySelector('.chat-messages');
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}`;
        
        const now = new Date();
        const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        
        messageDiv.innerHTML = `
            <div class="message-content">
                <div class="message-text">${text}</div>
                <div class="message-time">${timeString}</div>
            </div>
        `;
        
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }
</script>
</body>
</html>